
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    
    <title>Compatibility with Pyface test utilities &mdash; TraitsUI 7 Documentation</title>
    
    <link rel="stylesheet" type="text/css" href="../../../_static/css/spc-bootstrap.css">
    <link rel="stylesheet" type="text/css" href="../../../_static/css/spc-extend.css">
    <link rel="stylesheet" href="../../../_static/enthought.css" type="text/css" >
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" >
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '7.2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        LINK_SUFFIX: '',
        SOURCELINK_SUFFIX: '.txt',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/language_data.js"></script>
    <script type="text/javascript" src="../../../_static/js/copybutton.js"></script>
    <script type="text/javascript" src="../../../_static/js/wrap_on_dot.js"></script>
    <link rel="shortcut icon" href="../../../_static/img/favicon.ico">
    <link rel="index" title="Index" href="../../../genindex.html" >
    <link rel="search" title="Search" href="../../../search.html" >
    <link rel="top" title="TraitsUI 7 Documentation" href="../../../index.html" >
    <link rel="up" title="Testing TraitsUI Applications" href="../../testing.html" >
    <link rel="next" title="GUI event processing and exception handling" href="event_loop_and_exceptions.html" >
    <link rel="prev" title="Debugging GUI tests at runtime" href="debugging-gui-tests-at-runtime.html" > 
  </head>
  <body>
  <div class="container">
    <div class="header">
    </div>
  </div>

    <div class="container">
      <div class="main">
        
	<div class="row-fluid">
	  <div class="span12">
	    <div class="spc-navbar">
              
    <ul class="nav nav-pills pull-left">
	
        <li class="active"><a href="../../../index.html">TraitsUI 7 Documentation</a></li>
	
          <li class="active"><a href="../../index.html" >TraitsUI 7.2 User Manual</a></li>
          <li class="active"><a href="../../testing.html" accesskey="U">Testing TraitsUI Applications</a></li>
  
    <li><a href="#">Compatibility with Pyface test utilities</a></li>
  

    </ul>
              
              
    <ul class="nav nav-pills pull-right">
      <li class="active">
        <a href="../../../genindex.html" title="General Index"
           accesskey="I">index</a>
      </li>
      <li class="active">
        <a href="../../../py-modindex.html" title="Python Module Index"
           >modules</a>
      </li>
      <li class="active">
        <a href="event_loop_and_exceptions.html" title="GUI event processing and exception handling"
           accesskey="N">next</a>
      </li>
      <li class="active">
        <a href="debugging-gui-tests-at-runtime.html" title="Debugging GUI tests at runtime"
           accesskey="P">previous</a>
      </li>
    </ul>
              
	    </div>
	  </div>
	</div>
        

	<div class="row-fluid">
          <div class="span9">
            
        <div class="bodywrapper">
          <div class="body" id="spc-section-body" role="main">
            
  <div class="section" id="compatibility-with-pyface-test-utilities">
<h1>Compatibility with Pyface test utilities<a class="headerlink" href="#compatibility-with-pyface-test-utilities" title="Permalink to this headline">¶</a></h1>
<p><a class="reference internal" href="../../../api/traitsui.testing.tester.ui_tester.html#traitsui.testing.tester.ui_tester.UITester" title="traitsui.testing.tester.ui_tester.UITester"><code class="xref py py-class docutils literal notranslate"><span class="pre">UITester</span></code></a> is intended to be compatible with Pyface’s <code class="xref py py-class docutils literal notranslate"><span class="pre">ModalDialogTester</span></code>,
(for testing with modal dialogs) and <code class="xref py py-class docutils literal notranslate"><span class="pre">GuiTestAssistant</span></code> (for general
GUI event loop handling in tests).</p>
<div class="section" id="testing-with-modal-dialogs">
<span id="id1"></span><h2>Testing with modal dialogs<a class="headerlink" href="#testing-with-modal-dialogs" title="Permalink to this headline">¶</a></h2>
<p>When a test involves a modal dialog, <code class="xref py py-class docutils literal notranslate"><span class="pre">ModalDialogTester</span></code> will be needed.
<a class="reference internal" href="../../../api/traitsui.testing.tester.ui_tester.html#traitsui.testing.tester.ui_tester.UITester" title="traitsui.testing.tester.ui_tester.UITester"><code class="xref py py-class docutils literal notranslate"><span class="pre">UITester</span></code></a> can be used together, for example, to launch the modal dialog
which then gets closed by <code class="xref py py-class docutils literal notranslate"><span class="pre">ModalDialogTester</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyface.constant</span> <span class="kn">import</span> <span class="n">OK</span>
<span class="kn">from</span> <span class="nn">pyface.toolkit</span> <span class="kn">import</span> <span class="n">toolkit_object</span>

<span class="kn">from</span> <span class="nn">traitsui.testing.api</span> <span class="kn">import</span> <span class="n">MouseClick</span><span class="p">,</span> <span class="n">UITester</span>

<span class="n">ModalDialogTester</span> <span class="o">=</span> <span class="n">toolkit_object</span><span class="p">(</span>
    <span class="s2">&quot;util.modal_dialog_tester:ModalDialogTester&quot;</span>
<span class="p">)</span>

<span class="n">tester</span> <span class="o">=</span> <span class="n">UITester</span><span class="p">()</span>
<span class="k">with</span> <span class="n">tester</span><span class="o">.</span><span class="n">create_ui</span><span class="p">(</span><span class="n">demo</span><span class="p">)</span> <span class="k">as</span> <span class="n">ui</span><span class="p">:</span>

    <span class="n">simple_button</span> <span class="o">=</span> <span class="n">tester</span><span class="o">.</span><span class="n">find_by_id</span><span class="p">(</span><span class="n">ui</span><span class="p">,</span> <span class="s2">&quot;simple&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">click_simple_button</span><span class="p">():</span>
        <span class="n">simple_button</span><span class="o">.</span><span class="n">perform</span><span class="p">(</span><span class="n">MouseClick</span><span class="p">())</span>

    <span class="n">modal_tester</span> <span class="o">=</span> <span class="n">ModalDialogTester</span><span class="p">(</span><span class="n">click_simple_button</span><span class="p">)</span>
    <span class="n">modal_tester</span><span class="o">.</span><span class="n">open_and_run</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">click_button</span><span class="p">(</span><span class="n">OK</span><span class="p">))</span>
    <span class="k">assert</span> <span class="n">modal_tester</span><span class="o">.</span><span class="n">dialog_was_opened</span>
</pre></div>
</div>
<p>But if you try to modify or inspect GUI states using <a class="reference internal" href="../../../api/traitsui.testing.tester.ui_tester.html#traitsui.testing.tester.ui_tester.UITester" title="traitsui.testing.tester.ui_tester.UITester"><code class="xref py py-class docutils literal notranslate"><span class="pre">UITester</span></code></a> while the
dialog is opened, you should set the <a class="reference internal" href="../../../api/traitsui.testing.tester.ui_tester.html#traitsui.testing.tester.ui_tester.UITester.auto_process_events" title="traitsui.testing.tester.ui_tester.UITester.auto_process_events"><code class="xref py py-attr docutils literal notranslate"><span class="pre">auto_process_events</span></code></a>
attribute to false for those operations. Otherwise the ModalDialogTester and
UITester will enter a deadlock that blocks forever.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">when_opened</span><span class="p">(</span><span class="n">modal_dialog_tester</span><span class="p">):</span>
    <span class="n">ui_tester</span> <span class="o">=</span> <span class="n">UITester</span><span class="p">(</span><span class="n">auto_process_events</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">ui_tester</span><span class="o">.</span><span class="n">find_by_id</span><span class="p">(</span><span class="n">ui</span><span class="p">,</span> <span class="s2">&quot;button&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">perform</span><span class="p">(</span><span class="n">MouseClick</span><span class="p">())</span>

<span class="n">modal_dialog_tester</span> <span class="o">=</span> <span class="n">ModalDialogTester</span><span class="p">(</span><span class="n">callable_to_open_dialog</span><span class="p">)</span>
<span class="n">modal_dialog_tester</span><span class="o">.</span><span class="n">open_and_run</span><span class="p">(</span><span class="n">when_opened</span><span class="p">)</span>
</pre></div>
</div>
<p>In the above example, <code class="docutils literal notranslate"><span class="pre">ui</span></code> is an instance of <a class="reference internal" href="../../../api/traitsui.ui.html#traitsui.ui.UI" title="traitsui.ui.UI"><code class="xref py py-class docutils literal notranslate"><span class="pre">UI</span></code></a> that has been obtained
elsewhere in the test. Note that you can instantiate as many <a class="reference internal" href="../../../api/traitsui.testing.tester.ui_tester.html#traitsui.testing.tester.ui_tester.UITester" title="traitsui.testing.tester.ui_tester.UITester"><code class="xref py py-class docutils literal notranslate"><span class="pre">UITester</span></code></a> objects
as you need.</p>
</div>
<div class="section" id="using-uitester-and-guitestassistant">
<h2>Using UITester and GuiTestAssistant<a class="headerlink" href="#using-uitester-and-guitestassistant" title="Permalink to this headline">¶</a></h2>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">GuiTestAssistant</span></code> is a more general tool dealing with GUI processing in tests.
<a class="reference internal" href="../../../api/traitsui.testing.tester.ui_tester.html#traitsui.testing.tester.ui_tester.UITester" title="traitsui.testing.tester.ui_tester.UITester"><code class="xref py py-class docutils literal notranslate"><span class="pre">UITester</span></code></a>, on the other hand, is a more specific tool for testing GUI
components managed by TraitsUI. The two can be used together in tests.
<code class="xref py py-class docutils literal notranslate"><span class="pre">GuiTestAssistant</span></code> has been around before <a class="reference internal" href="../../../api/traitsui.testing.tester.ui_tester.html#traitsui.testing.tester.ui_tester.UITester" title="traitsui.testing.tester.ui_tester.UITester"><code class="xref py py-class docutils literal notranslate"><span class="pre">UITester</span></code></a> is introduced.</p>
<p>Since various methods on <a class="reference internal" href="../../../api/traitsui.testing.tester.ui_wrapper.html#traitsui.testing.tester.ui_wrapper.UIWrapper" title="traitsui.testing.tester.ui_wrapper.UIWrapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">UIWrapper</span></code></a> (such as <a class="reference internal" href="../../../api/traitsui.testing.tester.ui_wrapper.html#traitsui.testing.tester.ui_wrapper.UIWrapper.perform" title="traitsui.testing.tester.ui_wrapper.UIWrapper.perform"><code class="xref py py-func docutils literal notranslate"><span class="pre">perform()</span></code></a> and
<a class="reference internal" href="../../../api/traitsui.testing.tester.ui_wrapper.html#traitsui.testing.tester.ui_wrapper.UIWrapper.inspect" title="traitsui.testing.tester.ui_wrapper.UIWrapper.inspect"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect()</span></code></a>) automatically request GUI events to be processed, where
they are used entirely for modifying and inspecting GUI states, some previous
usage of <code class="xref py py-class docutils literal notranslate"><span class="pre">GuiTestAssistant</span></code> features may no longer be necessary.</p>
</div>
</div>


          </div>
        </div>
          </div>
      <div class="spc-rightsidebar span3">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../index.html">
              <img class="logo" src="../../../_static/img/e-logo.png" alt="Logo">
            </a></p>
  <h3><a href="../../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Compatibility with Pyface test utilities</a><ul>
<li><a class="reference internal" href="#testing-with-modal-dialogs">Testing with modal dialogs</a></li>
<li><a class="reference internal" href="#using-uitester-and-guitestassistant">Using UITester and GuiTestAssistant</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="debugging-gui-tests-at-runtime.html"
                        title="previous chapter">Debugging GUI tests at runtime</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="event_loop_and_exceptions.html"
                        title="next chapter">GUI event processing and exception handling</a></p>
  <h3>This Page</h3>
  <div>
    <a href="../../../_sources/traitsui_user_manual/testing/discussions/compatibility_pyface_testing.rst.txt"
       rel="nofollow">Show Source</a>
  </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
        </div>
      </div>
    </div>

    <div class="container container-navbar-bottom">
      <div class="spc-navbar">
        
      </div>
    </div>
    <div class="container">
    <div class="footer">
    <div class="row-fluid">
    <ul class="inline pull-left">
      <li>
        &copy; Copyright 2008-2020, Enthought
      </li>
      <li>
      Last updated on May 11, 2021.
      </li>
      <li>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 2.3.1.
      </li>
    </ul>
    </div>
    </div>
    </div>
  </body>
</html>